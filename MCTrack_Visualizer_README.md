# MCTrack å¯è§†åŒ–å·¥å…·

åŸºäºOpen3Då¼€å‘çš„ä¸“ä¸šå¤šç›®æ ‡è·Ÿè¸ªå¯è§†åŒ–å·¥å…·ï¼Œæ”¯æŒnuScenesæ•°æ®é›†å’ŒMCTrackè·Ÿè¸ªç»“æœçš„åŒæ­¥å¯è§†åŒ–ã€‚

![MCTrack Visualizer](docs/mctrack_visualizer_screenshot.png)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ¬ æ—¶é—´è½´æ§åˆ¶**: å¯æ‹–æ‹½è¿›åº¦æ¡ï¼Œæ”¯æŒä»»æ„å¸§è·³è½¬
- **ğŸš€ æ’­æ”¾æ§åˆ¶**: æ’­æ”¾/æš‚åœï¼Œå¯è°ƒèŠ‚æ’­æ”¾é€Ÿåº¦ 
- **ğŸ¯ 3Då¯è§†åŒ–**: ç‚¹äº‘ã€è·Ÿè¸ªæ¡†ã€è½¨è¿¹åŒæ­¥æ˜¾ç¤º
- **ğŸ¨ å®æ—¶è°ƒèŠ‚**: ç‚¹äº‘å¤§å°ã€è½¨è¿¹é•¿åº¦ç­‰å‚æ•°å®æ—¶è°ƒæ•´
- **ğŸŒˆ æ™ºèƒ½ç€è‰²**: åŸºäºè·Ÿè¸ªIDçš„è‡ªåŠ¨é¢œè‰²åˆ†é…
- **ğŸ“Š ä¿¡æ¯é¢æ¿**: å®æ—¶æ˜¾ç¤ºåœºæ™¯å’Œè·Ÿè¸ªç»Ÿè®¡ä¿¡æ¯

## ğŸ›  ç¯å¢ƒè¦æ±‚

### Pythonç¯å¢ƒ
```bash
Python >= 3.8
```

### å¿…éœ€ä¾èµ–
```bash
pip install open3d>=0.18.0
pip install numpy
pip install scipy
```

### å¯é€‰ä¾èµ–ï¼ˆç”¨äºnuScenesæ•°æ®åŠ è½½ï¼‰
```bash
pip install nuscenes-devkit
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨å¯è§†åŒ–å·¥å…·
```bash
cd D:\OneDrive\NUS\ME5400\Open3D_MOT_Visualize\examples\python
python mctrack_visualizer.py
```

### 2. ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°
```bash
python mctrack_visualizer.py \
    --nuscenes-path "D:\OneDrive\NUS\ME5400\MCTrack\data\nuScenes\datasets" \
    --tracking-results "D:\OneDrive\NUS\ME5400\MCTrack\results\nuscenes\latest\results.json" \
    --width 1920 \
    --height 1080
```

### 3. GUIæ“ä½œæµç¨‹

#### æ­¥éª¤1: æ•°æ®åŠ è½½
1. **åŠ è½½nuScenesæ•°æ®**:
   - åœ¨"nuScenesè·¯å¾„"ä¸­è¾“å…¥æ•°æ®é›†è·¯å¾„
   - ç‚¹å‡»"åŠ è½½nuScenes"æŒ‰é’®
   - ç­‰å¾…æ•°æ®é›†åŠ è½½å®Œæˆ

2. **åŠ è½½è·Ÿè¸ªç»“æœ**:
   - åœ¨"è·Ÿè¸ªç»“æœ"ä¸­è¾“å…¥MCTrackç»“æœæ–‡ä»¶è·¯å¾„
   - ç‚¹å‡»"åŠ è½½è·Ÿè¸ªç»“æœ"æŒ‰é’®

#### æ­¥éª¤2: æ’­æ”¾æ§åˆ¶
- **æ—¶é—´è½´**: æ‹–æ‹½è¿›åº¦æ¡è·³è½¬åˆ°ä»»æ„å¸§
- **æ’­æ”¾æŒ‰é’®**: ç‚¹å‡»æ’­æ”¾/æš‚åœ
- **å¸§æ§åˆ¶**: ä½¿ç”¨"ä¸Šä¸€å¸§"/"ä¸‹ä¸€å¸§"æŒ‰é’®
- **é€Ÿåº¦è°ƒèŠ‚**: è°ƒæ•´æ’­æ”¾é€Ÿåº¦æ»‘å—ï¼ˆ0.1x - 3.0xï¼‰

#### æ­¥éª¤3: æ˜¾ç¤ºè®¾ç½®
- **æ˜¾ç¤ºé€‰é¡¹**: 
  - â˜‘ï¸ æ˜¾ç¤ºç‚¹äº‘
  - â˜‘ï¸ æ˜¾ç¤ºè·Ÿè¸ªæ¡†  
  - â˜‘ï¸ æ˜¾ç¤ºè½¨è¿¹
- **å‚æ•°è°ƒèŠ‚**:
  - ç‚¹äº‘å¤§å°: 0.5 - 10.0
  - è½¨è¿¹é•¿åº¦: 5 - 50å¸§

## ğŸ“ æ•°æ®æ ¼å¼è¦æ±‚

### nuScenesæ•°æ®é›†ç»“æ„
```
data/nuScenes/datasets/
â”œâ”€â”€ maps/
â”œâ”€â”€ samples/
â”œâ”€â”€ sweeps/
â”œâ”€â”€ v1.0-trainval/
â”‚   â”œâ”€â”€ category.json
â”‚   â”œâ”€â”€ sample.json
â”‚   â””â”€â”€ ...
â””â”€â”€ v1.0-mini/  (æˆ–å…¶ä»–ç‰ˆæœ¬)
```

### MCTrackç»“æœæ ¼å¼
```json
{
  "results": {
    "sample_token_1": [
      {
        "translation": [x, y, z],
        "size": [length, width, height], 
        "rotation": [qw, qx, qy, qz],
        "tracking_id": 123,
        "tracking_name": "car",
        "tracking_score": 0.95
      }
    ]
  }
}
```

## ğŸ® å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Space` | æ’­æ”¾/æš‚åœ |
| `â†/â†’` | ä¸Šä¸€å¸§/ä¸‹ä¸€å¸§ |
| `â†‘/â†“` | è°ƒæ•´æ’­æ”¾é€Ÿåº¦ |
| `R` | é‡ç½®è§†è§’ |
| `1-9` | å¿«é€Ÿè·³è½¬åˆ°åœºæ™¯çš„1/9, 2/9, ..., 9/9ä½ç½® |

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆ
ç¼–è¾‘ `mctrack_visualizer.py` ä¸­çš„é¢œè‰²è®¾ç½®:
```python
def _generate_color_palette(self, num_colors: int):
    # è‡ªå®šä¹‰ä½ çš„é¢œè‰²æ–¹æ¡ˆ
    colors = []
    for i in range(num_colors):
        # RGBé¢œè‰²å€¼ [0-1]
        colors.append([r, g, b])
    return colors
```

### è°ƒæ•´å¯è§†åŒ–å‚æ•°
```python
class MCTrackSettings:
    def __init__(self):
        self.point_size = 2.0              # ç‚¹äº‘å¤§å°
        self.box_line_width = 2.0          # è¾¹ç•Œæ¡†çº¿å®½
        self.trajectory_length = 20        # è½¨è¿¹é•¿åº¦
        self.play_speed = 1.0             # é»˜è®¤æ’­æ”¾é€Ÿåº¦
```

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

**1. "nuscenes-devkit not available"**
```bash
pip install nuscenes-devkit
```

**2. "è·¯å¾„ä¸å­˜åœ¨"**
- æ£€æŸ¥nuScenesæ•°æ®é›†è·¯å¾„æ˜¯å¦æ­£ç¡®
- ç¡®ä¿åŒ…å«v1.0-trainvalæˆ–v1.0-miniæ–‡ä»¶å¤¹

**3. "æ— æ³•åŠ è½½ä»»ä½•nuScenesç‰ˆæœ¬"**
- ç¡®è®¤æ•°æ®é›†å®Œæ•´æ€§
- æ£€æŸ¥æ–‡ä»¶æƒé™

**4. è·Ÿè¸ªç»“æœä¸æ˜¾ç¤º**
- æ£€æŸ¥MCTrackç»“æœæ–‡ä»¶æ ¼å¼
- ç¡®è®¤sample_tokenåŒ¹é…

**5. ç•Œé¢å¡é¡¿**
- é™ä½ç‚¹äº‘å¤§å°
- å‡å°‘è½¨è¿¹é•¿åº¦
- å…³é—­ä¸å¿…è¦çš„æ˜¾ç¤ºé€‰é¡¹

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å¤§æ•°æ®é›†ä¼˜åŒ–**:
   - ä½¿ç”¨SSDå­˜å‚¨
   - å¢åŠ ç³»ç»Ÿå†…å­˜
   - ä½¿ç”¨GPUåŠ é€Ÿç‰ˆæœ¬çš„Open3D

2. **æ˜¾ç¤ºä¼˜åŒ–**:
   - é€‚å½“é™ä½ç‚¹äº‘å¯†åº¦
   - é™åˆ¶åŒæ—¶æ˜¾ç¤ºçš„è½¨è¿¹æ•°é‡
   - è°ƒæ•´æ¸²æŸ“è´¨é‡è®¾ç½®

## ğŸ“ˆ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„æ•°æ®æ ¼å¼æ”¯æŒ
1. ç»§æ‰¿åŸºç¡€æ•°æ®åŠ è½½å™¨
2. å®ç°è‡ªå®šä¹‰æ•°æ®è§£ææ–¹æ³•
3. æ³¨å†Œåˆ°å¯è§†åŒ–å·¥å…·

### è‡ªå®šä¹‰å¯è§†åŒ–ç»„ä»¶
1. æ‰©å±•å‡ ä½•å¯¹è±¡ç±»å‹
2. æ·»åŠ æ–°çš„äº¤äº’æ§ä»¶
3. å®ç°è‡ªå®šä¹‰æ¸²æŸ“æ•ˆæœ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥å®Œå–„è¿™ä¸ªå·¥å…·ï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
git clone https://github.com/XC-CN/Open3D_MOT_Visualize.git
cd Open3D_MOT_Visualize
pip install -r requirements.txt
```

### æäº¤è§„èŒƒ
- éµå¾ªPEP 8ä»£ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- æä¾›æµ‹è¯•ç”¨ä¾‹

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-29)
- âœ… åŸºç¡€å¯è§†åŒ–åŠŸèƒ½
- âœ… æ—¶é—´è½´æ‹–æ‹½æ§åˆ¶
- âœ… nuScenesæ•°æ®é›†æ”¯æŒ
- âœ… MCTrackç»“æœæ˜¾ç¤º
- âœ… è½¨è¿¹å¯è§†åŒ–
- âœ… æ’­æ”¾æ§åˆ¶

### è®¡åˆ’åŠŸèƒ½
- ğŸ”„ å¤šåœºæ™¯åˆ‡æ¢
- ğŸ”„ ç›¸æœºè§†å›¾åŒæ­¥æ˜¾ç¤º
- ğŸ”„ å¯¼å‡ºåŠŸèƒ½ï¼ˆå›¾åƒ/è§†é¢‘ï¼‰
- ğŸ”„ æ‰¹é‡å¤„ç†æ¨¡å¼
- ğŸ”„ å®æ—¶è·Ÿè¸ªç»“æœæ¥æ”¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [Open3D](http://www.open3d.org/) - 3Dæ•°æ®å¤„ç†å’Œå¯è§†åŒ–åº“
- [nuScenes](https://www.nuscenes.org/) - è‡ªåŠ¨é©¾é©¶æ•°æ®é›†
- [MCTrack](https://github.com/megvii-research/MCTrack) - å¤šç›®æ ‡è·Ÿè¸ªç®—æ³•

---

**å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–è”ç³»å¼€å‘è€…ï¼** ğŸš€